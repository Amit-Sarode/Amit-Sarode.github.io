import{r as i}from"./index-B0jFwhi7.js";import{b as E,f as y,l as h,J as R,u as V,j as F,M as S,h as I,c as J,o as l}from"./proxy-UXAtYhpo.js";function L(...t){const e=!Array.isArray(t[0]),o=e?0:-1,r=t[0+o],n=t[1+o],s=t[2+o],a=t[3+o],u=E(n,s,a);return e?u(r):u}function N(t,e,o){const r=t.get();let n=null,s=r,a;const u=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,p=()=>{n&&(n.stop(),n=null)},b=()=>{p(),n=new R({keyframes:[g(t.get()),g(s)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...o,onUpdate:a})};t.attach((f,M)=>(s=f,a=x=>M(m(x,u)),y.postRender(b),t.get()),p);let c;return h(e)&&(c=e.on("change",f=>t.set(m(f,u))),t.on("destroy",c)),c}function m(t,e){return e?t+e:t}function g(t){return typeof t=="number"?t:parseFloat(t)}function A(t){const e=V(()=>F(t)),{isStatic:o}=i.useContext(S);if(o){const[,r]=i.useState(t);i.useEffect(()=>e.on("change",r),[])}return e}function C(t,e){const o=A(e()),r=()=>o.set(e());return r(),I(()=>{const n=()=>y.preRender(r,!1,!0),s=t.map(a=>a.on("change",n));return()=>{s.forEach(a=>a()),J(r)}}),o}function O(t){l.current=[],t();const e=C(l.current,t);return l.current=void 0,e}function T(t,e,o,r){if(typeof t=="function")return O(t);const n=L(e,o,r);return Array.isArray(t)?d(t,n):d([t],([s])=>n(s))}function d(t,e){const o=V(()=>[]);return C(t,()=>{o.length=0;const r=t.length;for(let n=0;n<r;n++)o[n]=t[n].get();return e(o)})}function k(t,e={}){const{isStatic:o}=i.useContext(S),r=()=>h(t)?t.get():t;if(o)return T(r);const n=A(r());return i.useInsertionEffect(()=>N(n,t,e),[n,JSON.stringify(e)]),n}export{A as a,k as u};
